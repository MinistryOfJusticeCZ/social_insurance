<% related_nav_helper = CzegovPublishingComponents::Presenters::RelatedNavigationHelper.new(local_assigns) %>

<% if related_nav_helper.anything_to_show? %>
  <% random = SecureRandom.hex(4) %>
  <div class="gem-c-related-navigation">
    <h2 id="related-nav-related_items-<%= random %>"
        class="gem-c-related-navigation__main-heading"
        data-track-count="sidebarRelatedItemSection" >
      <%= t('components.related_navigation.related_content') %>
    </h2>

    <% section_index = 0 %>

    <% related_nav_helper.related_navigation.each do |section_title, links| %>
      <% next unless links.any? %>

      <% section_index += 1 %>

      <%= render 'czegov_publishing_components/related_navigation/section',
        related_nav_helper: related_nav_helper,
        section_title: section_title,
        links: links,
        section_index: section_index,
        random: random %>
    <% end %>
  </div>
<% end %>
